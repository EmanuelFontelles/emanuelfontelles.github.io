<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>This is ArchLinux - Installation Guide</title>

  <meta name="author" content="Emanuel Fontelles" />

  
  <meta name="description" content="A quick introduction"/>
  

<!-- Add favicon -->
<link rel="shortcut icon" 
      type="img/png" 
      href="/favicon.png" >

  <link rel="alternate" type="application/rss+xml" title="Emanuel Fontelles - Emanuel's personal web page" href="/feed.xml" />

<!-- everything has to be repeated twice because on 2016-02-01 GitHub pages migrated to jekyll 3; see bug https://github.com/jekyll/jekyll/issues/4439 -->

  
  
    
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
    
  

  
  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  
  

  
  

  
  

  <!-- Facebook OpenGraph tags -->
  <meta property="og:title" content="This is ArchLinux - Installation Guide" />
  <meta property="og:type" content="website" />

  
  <meta property="og:description" content="A quick introduction" />
  

  
  <meta property="og:url" content="http://localhost:4000/blog/ArchLinux-Instalation.html" />
  

  
  <meta property="og:image" content="http://localhost:4000/img/avatar-icon.jpeg" />
  

  <!-- Twitter tags -->
  <meta name="twitter:card" content="summary" />

      <!-- Scripts for ggvis from http://ggvis.rstudio.com/0.1/interactivity.html-->
  <!-- ggvis stuff -->
  <script src="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/jquery-1.11.0.min.js"></script>
  <script src="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/jquery-ui/js/jquery-ui-1.10.4.custom.min.js"></script>
  <script charset="utf-8" src="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/d3.min.js"></script>
  <script src="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/vega.min.js"></script>
  <script src="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/QuadTree.js"></script>
  <script src="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/lodash.min.js"></script>
  <script>var lodash = _.noConflict();</script>
  <script src="http://ggvis.rstudio.com/0.1/libs/ggvis/js/ggvis.js"></script>
  <link rel="stylesheet" type="text/css" href="http://ggvis.rstudio.com/0.1/libs/ggvis/lib/jquery-ui/css/smoothness/jquery-ui-1.10.4.custom.min.css"/>
  <link rel="stylesheet" type="text/css" href="http://ggvis.rstudio.com/0.1/libs/ggvis/css/ggvis.css"/>
  <!-- end of ggvis scripts-->


</head>


  <body>
    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-125944586-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://localhost:4000">Emanuel Fontelles</a>
    </div>



    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            






<a href="/">Home</a>

          </li>
        
        
        
          <li>
            






<a href="/projects.html">Projects</a>

          </li>
        
        
        
          <li>
            






<a href="/aboutme.html">About me</a>

          </li>
        
        
        
          <li>
            






<a href="https://emanuelfontelles.github.io/vitae">CV</a>

          </li>
        
        
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://localhost:4000 ">
	      <img class="avatar-img" src="/img/avatar-icon.jpeg" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  




    <div role="main" class="container main-content">
      <header class="header-post">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <div class="post-heading">
        <h1>This is ArchLinux - Installation Guide</h1>
        
        <h2 class="post-subheading">A quick introduction</h2>
        
        <span class="post-meta">Posted on September 17, 2018</span>
      </div>
     </div>
  </div>
</header>

<article>
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	  <h2 id="welcome-to-freedom">Welcome to freedom</h2>

<p>When I started to work with computers and Linux based systems, I found myself in Ubuntu distributions, Ubuntu 10.04 was one of the bests. With time and experience I tried Debian OS, Elementary OS, LinuxMint OS, RedHat, but all theses systems seems to be the same. I don’t know but I can’t stop to search for the best distro for me. Until the ArchLinux show up!</p>

<center>
    <figure>
        <img src="/blog/figs/2018-08-17-archlinux-instalation/cover.png" width="304" height="228" alt="Cover" />
        <br />
        <em> <a href="https://wiki.archlinux.org/index.php/Arch_Linux"> Read more </a>ArchLinux</em> page.
    </figure>
</center>

<p>My intention here is provide a simple installation guide that will help you to understand how Arch philosophy works. The <a href="https://wiki.archlinux.org/index.php/Installation_Guide">official installation guide</a> is the better way to understand the full installation of Arch.</p>

<h2 id="download-the-arch-iso">Download the Arch ISO</h2>
<p>First of all we can download the ISO from Archlinux website</p>

<ul>
  <li>Image from https://www.archlinux.org/download/</li>
</ul>

<p>The image can be burned to a CD, mounted as an ISO file, or be directly written to a USB stick using a utility like <code class="highlighter-rouge">dd</code>.</p>

<h3 id="copy-to-a-usb-drive">Copy to a USB drive</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dd bs=4M if=/path/to/archlinux.iso of=/dev/sdx status=progress oflag=sync
</code></pre></div></div>

<p>Run the following command, replacing <code class="highlighter-rouge">/dev/sdx</code> with your drive, e.g. <code class="highlighter-rouge">/dev/sdb</code>. (Do not append a partition number, so <strong>do not use something like /dev/sdb1</strong>).</p>

<h3 id="boot-from-usb-drive">Boot from USB drive</h3>

<p>The new common way to install operational systems as Linux Systems or even Microsoft Windows is using <a href="https://wiki.archlinux.org/index.php/Unified_Extensible_Firmware_Interface">UEFI system</a> (You can read more about it here). Here we’ll use UEFI mode, make sure that secure boot is disabled in the BIOS configuration. To see if you are booted on UEFI mode, just list the directory</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls /sys/firmware/efi/efivars
</code></pre></div></div>

<p>if the directory does not exist, the system may be booted in BIOS or CSM mode.</p>

<h2 id="setup-the-environment">Setup the environment</h2>

<h3 id="internet-connection">Internet connection</h3>

<p>The ArchLinux installation enables the <code class="highlighter-rouge">dhcpcd</code> daemon for wired network devices on boot. The connection may be verified with ping:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ping archlinux.org
</code></pre></div></div>

<p>If you have a wifi connection, you can try <code class="highlighter-rouge">wifi-menu</code> and setup a wireless connection.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wifi-menu
</code></pre></div></div>

<h3 id="create-partitions">Create partitions</h3>

<p>This part can be a realy trick one. ArchLinux need just to partition, the <code class="highlighter-rouge">\boot</code> partition (that needs to be format as <strong>FAT32</strong>) and the <code class="highlighter-rouge">\</code>, the root partition. You can create more as <code class="highlighter-rouge">\home</code> partition that keeps the users data.</p>

<p>To create the partitions I’ll use <code class="highlighter-rouge">fdisk</code>, a simple manager to create a table partition. You can use <code class="highlighter-rouge">cfdisk</code> if you want. First, identify the label of yours partitions</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fdisk -l
</code></pre></div></div>

<p>the command above will show the disk attached to your computer such as <code class="highlighter-rouge">/dev/sda</code> or <code class="highlighter-rouge">/dev/nvme0n1</code>. Now you can create a new table of partition as GPT partition table, with to partition, <code class="highlighter-rouge">\boot</code> and <code class="highlighter-rouge">\</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fdisk /dev/sda
</code></pre></div></div>

<p>you can learn about fdisk <a href="https://wiki.archlinux.org/index.php/Fdisk">here</a>. Basically you have to create a 500 Mb partition to that will be a boot partition and the rest to root partition. The result will be something like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Disk /dev/sda: 465.8 GiB, 500107862016 bytes, 976773168 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: 7D918645-8068-4E41-AB42-A411242F4546

Device         Start       End   Sectors   Size Type
/dev/sda1       2048   1023999   1021952   499M EFI System
/dev/sda2    1023999 976773119 659331072 464.4G Linux filesystem
</code></pre></div></div>

<h3 id="format-the-partitions">Format the partitions</h3>
<p>Once the partitions have been created, each must be formatted with an appropriate file system. For example, to format the boot partition on <code class="highlighter-rouge">/dev/sda1</code> with <code class="highlighter-rouge">FAT32</code>, run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkfs.vfat -F32 -n EFI /dev/sda1
</code></pre></div></div>

<p>and to format the root partition on <code class="highlighter-rouge">/dev/sda2</code> with <code class="highlighter-rouge">ext4</code>, run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkfs.ext4 /dev/sda2
</code></pre></div></div>

<h3 id="mount-the-new-system">Mount the new system</h3>
<p>Now it’s time to mount the file system on the root partition to <code class="highlighter-rouge">/mnt</code>, for example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount /dev/sda2 /mnt
</code></pre></div></div>

<p>Once the file system was mounted, we can create a different folder that will contain the <code class="highlighter-rouge">boot</code> files</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /mnt/boot
mount /dev/sda1 /mnt/boot
</code></pre></div></div>

<p>We finished the environment to create the ArchLinux installation.</p>

<h2 id="installing-the-system">Installing the system</h2>

<p>ArchLinux is an rolling release distribution which means that we don’t have an specific version. So, to install the entire system with a minimal base package we can do</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacstrap /mnt base base-devel
</code></pre></div></div>

<p>In this moment we’re downloading the entire system and create the tree of system, with all directories as <code class="highlighter-rouge">\home</code>, <code class="highlighter-rouge">\etc</code>, <code class="highlighter-rouge">...</code>, <code class="highlighter-rouge">\var</code>.</p>

<h3 id="generate-fstab">Generate fstab</h3>
<p>We now have to specify to our computer the mount order, for example, which partition has to be mounted as <code class="highlighter-rouge">\boot</code> partition or <code class="highlighter-rouge">\</code>. It’s can be done running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</code></pre></div></div>

<p>After this command the installation it’s almost finished, we have just to install the bootloader, to boot the system properly.</p>

<h3 id="enter-the-new-system">Enter the new system</h3>
<p>Once installed, we have to setup the bootloader, but we can configure the entire installation as hostname, system clock, locale, new users, etc. I’ll put this as optional to keep the installation simple.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>arch-chroot /mnt 
</code></pre></div></div>

<p>If you wanna do it, following the next section, if not, you can skip to setup the <code class="highlighter-rouge">mkinitcpio</code>.</p>

<h4 id="optional-configuration">Optional configuration</h4>
<p>This is some simple configurations that can be done after the installation, but you can do right now.</p>

<h5 id="setup-system-clock">Setup system clock</h5>
<p>In my case, I live in Fortaleza/CE - Brazil, here is the way that I set my time:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ln -s /usr/share/zoneinfo/America/Fortaleza /etc/localtime
hwclock --systohc --utc
</code></pre></div></div>

<p>You can see the right locale to your place <a href="https://wiki.archlinux.org/index.php/Time#Time_zone">here</a>.</p>

<h5 id="set-the-hostname">Set the hostname</h5>
<p>The hostname is your machine name’s, for example <code class="highlighter-rouge">belchior</code>, and you can set as follows</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo belchior &gt; /etc/hostname
</code></pre></div></div>

<h5 id="generate-locale">Generate locale</h5>
<p>This is how your computer will setup the language and characters. Uncomment wanted locales in /etc/locale.gen</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/locale.gen
locale-gen
localectl set-locale LANG=en_US.UTF-8
</code></pre></div></div>

<p>To avoid problems with <code class="highlighter-rouge">gnome-terminal</code> set locale system wide</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo LANG=en_US.UTF-8 &gt;&gt; /etc/locale.conf
echo LC_ALL= &gt;&gt; /etc/locale.conf
</code></pre></div></div>

<p>Pay attention to the UTF-8. Capital letters!</p>

<h5 id="add-user">Add user</h5>
<p>Here you can add differents users to your machine</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>useradd -m -g users -G wheel &lt;username&gt;
passwd &lt;username&gt;
</code></pre></div></div>

<p>You can setup the new user to install as administrator</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EDITOR=nano visudo
</code></pre></div></div>

<p>Inside visudo, find the line that says <em>“Uncomment to allow members of group wheel to execute any command”</em>. Just remove the comment from <strong>#%wheel ALL=(ALL) ALL</strong>. It should now look like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>%wheel ALL=(ALL) ALL 
</code></pre></div></div>

<p>Then CTRL + X, now it should prompt you if you want to save, press Y. Now wheel has proper permissions.</p>

<h5 id="set-password-for-root">Set password for root</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd
</code></pre></div></div>

<h5 id="starting-dhcpcd-service-on-boot">Starting <code class="highlighter-rouge">dhcpcd</code> service on boot</h5>
<p>This will provide an dynamic internet IP to your machine</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl enable dhcpcd.service
</code></pre></div></div>

<h4 id="installing-bootloader">Installing bootloader</h4>
<p>I chose the most common bootloader, <a href="https://wiki.archlinux.org/index.php/GRUB"><strong>grub</strong></a>, as always you can chose whatever you want, this is ArchLinux philosophy. To install <code class="highlighter-rouge">grub</code> you can just type</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S  grub efibootmgr
</code></pre></div></div>

<p>Once <code class="highlighter-rouge">grub</code> was installed you have to install grub directories on your <code class="highlighter-rouge">\boot</code> partition</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub 
</code></pre></div></div>

<p>Now you can create the configuration file the will boot your system</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></div></div>

<h3 id="youve-finished">You’ve finished</h3>
<p>Yeah, congrats! You’ve finished the ArchLinux installation, you can exit from the installed system just typing</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exit
</code></pre></div></div>

<p>Reboot into the new system, don’t forget to remove the cd/usb.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reboot
</code></pre></div></div>

<h2 id="after-installation">After installation</h2>

<p>If you finished all this tutorial, probabily you want to install some interface as <a href="https://wiki.archlinux.org/index.php/GNOME">Gnome</a>. To do this you have to install some packages as <code class="highlighter-rouge">X-org</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S xorg xorg-xinit gnome gnome-shell
</code></pre></div></div>

<p>After the installation just start the <a href="https://wiki.archlinux.org/index.php/GDM">GDM</a> service that’s provides the graphical managements of users.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl enable gdm.service
</code></pre></div></div>

<p>Now, reboot one more time and the installation will be finished.</p>

<p>Best regards.</p>

	</div>
  </div>
</article>

<!-- tags do not look great like this

  <div class="blog-tags">
	  Tags: archlinux, installation, guide
  </div>

-->

<div class="row">
  <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <ul class="pager blog-pager">
      
      <li class="previous">
        <a href="/blog/Monte-Carlo-Metropolis.html" data-toggle="tooltip" data-placement="top" title="Monte Carlo Algorithms">&larr; Previous Post</a>
      </li>
      
      
      <li class="next">
        <a href="/blog/Manifold-Learning.html" data-toggle="tooltip" data-placement="top" title="Manifold Learning">Next Post &rarr;</a>
      </li>
      
    </ul>
  </div>
</div>


<div class="row disqus-comments">
  <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'emanuelfontelles';
	    // ensure that pages with query string get the same discussion
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];	    
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


  </div>
</div>


    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="https://github.com/emanuelfontelles" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
		  
          <li>
            <a href="mailto:emanuelfontelles@fisica.ufc.br" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="https://linkedin.com/in/emanuelfontelles" title="LinkedIn">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="https://stackoverflow.com/users/7821063/emanuel-fontelles" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  		  
        </ul>
        <p class="copyright text-muted">
		  Emanuel Fontelles
		  &nbsp;&bull;&nbsp;
		  2018
		  
		  
	    </p>
		<p class="theme-by text-muted">
		  Theme by
		  <a href="https://github.com/daattali/beautiful-jekyll">beautiful-jekyll</a>
		</p>
      </div>
    </div>
  </div>
</footer>

  
    <!-- everything has to be repeated twice because on 2016-02-01 GitHub pages migrated to jekyll 3; see bug https://github.com/jekyll/jekyll/issues/4439 -->











  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  




	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-125944586-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


  
  </body>
</html>
